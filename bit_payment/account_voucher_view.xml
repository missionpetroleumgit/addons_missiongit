<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>

		<!-- Payment order
                    <field name="line_ids" position="attributes">
                        <attribute name="context">{'order_id': active_id or False, 'partner_id': partner_id }</attribute>
                    </field>
        -->
		<record model="ir.ui.view" id="view_bit_payment_order_form">
			<field name="name">payment.order.tree</field>
			<field name="model">payment.order</field>
			<field name="inherit_id" ref="account_payment.view_payment_order_form"/>
			<field name="arch" type="xml">
				<field name="user_id" position='before' >
					<field name='partner_id' />
				</field>
			</field>
		</record>

		<!-- Account Voucher -->
		<!-- Tree -->
		<record model="ir.ui.view" id="view_bit_voucher_tree">
			<field name="name">account.voucher.tree</field>
			<field name="model">account.voucher</field>
			<field name="inherit_id" ref="account_voucher.view_voucher_tree"/>
			<field name="arch" type="xml">
				<field name="journal_id" position='before' >
					<field name='pay_mode_id' />
				</field>
			</field>
		</record>
		<!-- Inherit Pay -->
		<record model="ir.ui.view" id="view_bit_vendor_receipt_dialog_form">
			<field name="name">account.voucher.receipt.dialog.form</field>
			<field name="model">account.voucher</field>
			<field name="priority">30</field>
			<field name="inherit_id" ref="account_voucher.view_vendor_receipt_dialog_form"/>
			<field name="arch" type="xml">
				<field name="amount" position='replace' >
					<field name='pay_mode_id' required='1' on_change="onchange_pay_mode(pay_mode_id, partner_id, amount, type, date, context)" />
				</field>
				<field name="journal_id" position='after' >
					<field name="amount" class="oe_inline"
						   string="Paid Amount"
						   widget='monetary' options='{"currency_field": "currency_id"}'
						   invisible="context.get('line_type', False)"
						   on_change="onchange_amount(amount, payment_rate, partner_id, journal_id, currency_id, type, date, payment_rate_currency_id, company_id, context)"/>
				</field>
				<field name="is_check"/>
			</field>
		</record>
		<!-- Form -->
		<record model="ir.ui.view" id="view_bit_voucher_form">
			<field name="name">account.voucher.form</field>
			<field name="model">account.voucher</field>
			<field name="inherit_id" ref="account_voucher.view_vendor_payment_form"/>
			<field name="arch" type="xml">
				<button string="Cancel Voucher" position='replace'>
					<button name="cancel_voucher" string="Cancel Voucher" states="draft" />
				</button>
				<button string="Unreconcile" position='replace'>
					<button name="cancel_voucher" string="Unreconcile" type="object" states="proforma,posted" invisible="context.get('line_type', False)" confirm="Are you sure to unreconcile and cancel this record ?"/>
				</button>
				<field name="state" position='replace'>
					<field name="state" widget="statusbar" statusbar_visible="draft,proforma,posted" statusbar_colors='{"proforma":"blue"}'/>
				</field>
				<field name="journal_id" position='replace' >
					<field name='pay_mode_id' on_change="onchange_pay_mode(pay_mode_id, partner_id, amount, type, date, context)" />
					<field name="journal_id"
						   domain="[('type','in',['bank', 'cash'])]"
						   invisible="context.get('line_type', False)"
						   widget="selection"
						   on_change="onchange_journal(journal_id, line_dr_ids, False, partner_id, date, amount, type, company_id, context)"
						   string="Journal"/>
				</field>
				<!--Quito el onchange original para que eugenia pueda hacer pagos desde las lineas-->
				<xpath expr="//form/sheet/group/group/field[@name='amount']" position="replace">
					<field name="amount" class="oe_inline"
						   string="Paid Amount"
						   widget='monetary' options='{"currency_field": "currency_id"}'
						   invisible="context.get('line_type', False)"/>
				</xpath>
			</field>
		</record>


	</data>
</openerp>        
