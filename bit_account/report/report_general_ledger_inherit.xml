<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>

<template id="report_generalledger">
    <t t-call="report.html_container">
        <t t-set="data_report_margin_top" t-value="22"/>
        <t t-set="data_report_header_spacing" t-value="18"/>
        <t t-set="data_report_dpi" t-value="120"/>

        <t t-foreach="docs" t-as="o">
            <t t-call="report.internal_layout">
                <div class="page" style="position:absolute;width:70%;">

                    <table class="table table-condensed table-bordered">
                        <tr>
                            <td align="center"><img t-if="res_company.logo" t-att-src="'data:image/png;base64,%s' % res_company.logo"
                                                    style="max-height:80px"/></td>
                            <td align="center"><h4><strong><span t-field-options="{&quot;widget&quot;:
                            &quot;contact&quot;, &quot;fields&quot;: [&quot;name&quot;], &quot;no_marker&quot;: true, &quot;no_tag_br&quot;: true}"/>
                            </strong></h4><span t-field="res_company.partner_id" t-field-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;:
                            [&quot;address&quot;], &quot;no_marker&quot;: true, &quot;no_tag_br&quot;: true}"/></td>
                            <td>
                                <p>
                                    <span t-if="data['form']['filter'] == 'filter_period'">Filtrado por periodo</span>
                                    <span t-if="data['form']['filter'] == 'filter_date'">Filtrado por fecha</span>
                                    <p t-if="data['form']['filter'] == 'filter_period'">
                                        Desde : <span t-esc="get_start_period(data)"/>
                                        Hasta : <span t-esc="get_end_period(data)"/>
                                    </p>
                                    <p t-if="data['form']['filter'] == 'filter_date'">
                                        Desde : <span t-esc="formatLang(get_start_date(data), date=True)"/><br />
                                        Hasta : <span t-esc="formatLang(get_end_date(data), date=True)"/>
                                    </p>
                                </p>
                            </td>
                        </tr>
                        <tr>
                            <td align="center"><h9><strong>RUC: </strong><span t-esc="res_company.partner_id.part_number"/></h9></td>
                            <td align="center"><h4>Libro Mayor</h4></td>
                        </tr>
                    </table>
                    
				   <table>
                       <thead>
                           <tr>
                               <th width="200"><h2></h2></th>
                               <th class="text-center"><h2><span t-esc="res_company.name"/>: Libro Mayor</h2></th>
                           </tr>
                           <tr>
                               <th width="200"><h2></h2></th>
                               <th class="text-center"><h4 t-esc="get_address()"/></th>
                           </tr>
                           <tr>
                               <th><img t-if="res_company.logo" t-att-src="'data:image/png;base64,%s' % res_company.logo"
                                                    style="max-height:80px" align="left"/></th>
                               <th class="text-center">
                                   <p>
                                   <span t-if="data['form']['filter'] == 'filter_period'">Filtrado por periodo</span>
                                   <span t-if="data['form']['filter'] == 'filter_date'">Filtrado por fecha</span>
                                   <p t-if="data['form']['filter'] == 'filter_period'">
                                       Desde : <span t-esc="get_start_period(data)"/>
                                       Hasta : <span t-esc="get_end_period(data)"/>
                                   </p>
                                   <p t-if="data['form']['filter'] == 'filter_date'">
                                       Desde : <span t-esc="formatLang(get_start_date(data), date=True)"/><br />
                                       Hasta : <span t-esc="formatLang(get_end_date(data), date=True)"/>
                                   </p>
                               </p>
                               </th>
                           </tr>

                       </thead>
                   </table>


                    <table class="table table-condensed">
                        <!-- <thead> -->
                            <tr class="text-center">
                                <!-- <th>AÃ±o</th> -->
                                <th>Fecha</th>
                                <th>Tipo</th>
                                <th>Nro Cheque</th>
                                <th>Empresa</th>
                                <th>Ref</th>
                                <th>Movimiento</th>
                                <th>Etiqueta</th>
                                <th>Contrapartida</th>
                                <th>C.Costo</th>
                                <th>Debito</th>
                                <th>Credito</th>
                                <th>Balance</th>
                                <th t-if="data['form']['amount_currency']">Currency</th>
                            </tr>
                        <!-- </thead> -->
                        <tbody>
                            <t t-foreach="get_children_accounts(o)" t-as="childrenaccount">
                                <tr style="font-weight: bold;">
                                    <td colspan="8">
                                        <span style="color: white;" t-esc="'..'* (childrenaccount['level'] - 1)"/>
                                        <span t-esc="childrenaccount['code']"/>
                                        <span t-esc="childrenaccount['name']"/>
                                    </td>
                                    <td class="text-right">
                                        <span t-esc="formatLang(sum_debit_account(childrenaccount), digits=get_digits(dp='Account'), currency_obj=res_company.currency_id)"/>
                                    </td>
                                    <td class="text-right">
                                        <span t-esc="formatLang(sum_credit_account(childrenaccount), digits=get_digits(dp='Account'), currency_obj=res_company.currency_id)"/>
                                    </td>
                                    <td class="text-right">
                                        <span t-esc="formatLang(sum_balance_account(childrenaccount), digits=get_digits(dp='Account'), currency_obj=res_company.currency_id)"/>
                                    </td>
                                    <td class="text-right" t-if="data['form']['amount_currency']">
                                        <span t-esc="formatLang(sum_currency_amount_account(childrenaccount), digits=get_digits(dp='Account')) if sum_currency_amount_account(childrenaccount) > 0.00 else ''"/>
                                    </td>
                                </tr>
                                <tr t-foreach="lines(childrenaccount)" t-as="line">
                                    <!-- <td><span t-esc="get_fiscalyear(data)"/></td> -->
                                    <td><span t-esc="formatLang(line['ldate'], date=True)"/></td>
                                    <td><span t-esc="line['lcode']"/></td>
                                    <td><span t-esc="line['partner_name']"/></td>
                                    <td><span t-if="line['lref']" t-esc="line['lref']"/></td>
                                    <td><span t-esc="line['move']"/></td>
                                    <td><span t-esc="line['lname']"/></td>
                                    <td><span t-esc="line['line_corresp'].replace(',',', ')"/></td>
                                    <td><span t-esc="line['accon_name']"/></td>
                                    <td class="text-right">
                                        <span t-esc="formatLang(line['debit'], digits=get_digits(dp='Account'), currency_obj=res_company.currency_id)"/>
                                    </td>
                                    <td class="text-right">
                                        <span t-esc="formatLang(line['credit'], digits=get_digits(dp='Account'), currency_obj=res_company.currency_id)"/>
                                    </td>
                                    <td class="text-right">
                                        <span t-esc="formatLang(line['progress'], digits=get_digits(dp='Account'), currency_obj=res_company.currency_id)"/>
                                    </td>
                                    <td class="text-right" t-if="data['form']['amount_currency']">
                                        <span t-esc="formatLang(line['amount_currency'], digits=get_digits(dp='Account')) if line['amount_currency'] > 0.00 else ''"/>
                                        <span t-esc="line['currency_code'] if line['amount_currency'] > 0.00 else ''"/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </div>
            </t>
        </t>
    </t>
</template>
</data>
</openerp>